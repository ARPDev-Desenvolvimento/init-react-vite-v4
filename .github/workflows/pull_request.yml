name: Pull Request Creation

on:
  push:
    branches:
      - sincronization   # Defina o branch de onde você quer criar o pull request

jobs:
  create_pull_request:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Add and commit changes
        run: |
          git config --local user.email "arpdevdesenvolvimento@gmail.com"
          git config --local user.name "ARPDev-Desenvolvimento"
          git add .
          git commit -m "Auto-generated pull request"
        env:
          GITHUB_TOKEN: ${{ secrets.TOKEN }}
        
      - name: Push changes
        run: git push origin sincronization
        env:
          GITHUB_TOKEN: ${{ secrets.TOKEN }}

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
          token: ${{ secrets.TOKEN }}  # Use seu próprio token de acesso
          commit-message: "Auto-generated pull request"
          title: "Auto-generated pull request"
          body: "This pull request was automatically generated by a GitHub Actions workflow."
          branch: sincronization  # Defina o branch de onde você quer criar o pull request
          base: master  # Defina o branch de destino do pull request
          delete-branch: true
        env:
          GITHUB_TOKEN: ${{ secrets.TOKEN }}